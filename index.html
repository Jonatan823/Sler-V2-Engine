<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <title>SLER - MOTOR V2 PRIVATE</title>
    <style>
        :root { --bg: #0a0a0c; --panel: #16161a; --accent: #007acc; --success: #4ec9b0; --text: #a0a0a0; }
        body { font-family: 'Consolas', monospace; background: var(--bg); color: var(--text); margin: 0; display: flex; height: 100vh; overflow: hidden; }
        
        /* Capa de Seguridad */
        #security-gate { position: fixed; inset: 0; background: #050505; z-index: 10000; display: flex; align-items: center; justify-content: center; }
        .gate-card { border: 1px solid var(--accent); padding: 40px; text-align: center; background: var(--panel); box-shadow: 0 0 20px rgba(0,122,204,0.3); }
        input[type="password"] { background: #000; border: 1px solid #333; color: var(--success); padding: 12px; margin-bottom: 20px; display: block; width: 280px; text-align: center; font-family: 'Consolas'; outline: none; }
        
        /* Layout del Dashboard */
        #sidebar { width: 280px; background: var(--panel); border-right: 1px solid #2d2d33; padding: 15px; }
        #main-display { flex: 1; display: flex; flex-direction: column; background: #0d0d0f; }
        #data-stream { flex: 1; overflow-y: auto; padding: 20px; font-size: 13px; border-bottom: 1px solid #2d2d33; }
        .console-footer { padding: 15px; background: var(--panel); }
        .led { width: 8px; height: 8px; border-radius: 50%; display: inline-block; margin-right: 5px; background: #333; }
        .led-on { background: var(--success); box-shadow: 0 0 5px var(--success); }
    </style>
</head>
<body>

    <div id="security-gate">
        <div class="gate-card">
            <div style="color: var(--accent); font-size: 16px; margin-bottom: 20px; letter-spacing: 2px;">SLER PRIVATE INTERFACE</div>
            <input type="password" id="access-pass" placeholder="PASSWORD">
            <button id="btn-login" style="width: 100%; padding: 12px; background: var(--accent); border: none; color: white; cursor: pointer; font-weight: bold; font-family: 'Consolas';">LOGIN</button>
        </div>
    </div>

    <aside id="sidebar">
        <div style="font-size: 10px; color: var(--accent); margin-bottom: 10px;">SYSTEM STATUS</div>
        <div style="font-size: 12px; margin-bottom: 20px;">
            MOTOR V2: <span class="led" id="led-motor"></span> <span id="status-text">OFFLINE</span>
        </div>
        <div style="font-size: 11px; border-top: 1px solid #333; pt: 10px;">
            OWNER: RIBOT JONATAN<br>
            IP: REGISTERED 2025
        </div>
        <div class="module" style="border-top: 2px solid #dcdcaa; margin-top: 15px; background: #1e1e1e; padding: 10px; border-radius: 4px;">
    <div class="module-title" style="color: #dcdcaa; font-size: 10px; font-weight: bold; margin-bottom: 8px;">AI BINDING PROTOCOL (SLER-B)</div>
    
    <div class="status-row" style="display: flex; justify-content: space-between; font-size: 10px; color: #a0a0a0;">
        <span>VARIABLES EXIGIDAS:</span> 
        <span style="color: #4ec9b0;">ACTIVE [4]</span>
    </div>
    
    <div id="variables-list" style="font-size: 9px; color: #666; margin: 5px 0; line-height: 1.4;">
        • AUTH_ID: MANDATORY<br>
        • SYLLABLE_INTEGRITY: STRICT<br>
        • RECIPROCAL_FLOW: ENABLED<br>
        • IP_CLAIM_2025: VERIFIED
    </div>

    <div style="margin-top: 10px; background: #000; padding: 8px; border: 1px solid #333; display: flex; justify-content: space-between; align-items: center;">
        <span style="font-size: 9px; color: #dcdcaa;">EXTERNAL REQUESTS:</span>
        <span id="ext-requests-count" style="color: #dcdcaa; font-weight: bold; font-family: 'Consolas'; font-size: 14px;">0</span>
    </div>
</div>
    </aside>

    <main id="main-display">
        <div id="data-stream"></div>
        <footer class="console-footer">
            <input type="text" id="cmd-input" placeholder="Comando..." style="width: 80%; background: #000; border: 1px solid #333; color: #fff; padding: 10px;">
            <button onclick="sendData()" style="padding: 10px 20px; background: var(--accent); border: none; color: white; cursor: pointer;">EXECUTE</button>
        </footer>
    </main>

    <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-database.js"></script>

    <script>
        const firebaseConfig = {
            apiKey: "AIzaSyD5ITa76Xc7mmihQPC2AUCHQFStii4NAUg",
            authDomain: "sler-chat-lab.firebaseapp.com",
            databaseURL: "https://sler-chat-lab-default-rtdb.firebaseio.com",
            projectId: "sler-chat-lab",
            storageBucket: "sler-chat-lab.firebasestorage.app",
            messagingSenderId: "594954603335",
            appId: "1:594954603335:web:d332aa211e8ecce5521a62"
        };

        firebase.initializeApp(firebaseConfig);
        const db = firebase.database();
        const MASTER_KEY = "joniclapton";

        // Lógica de Acceso Directa
        document.getElementById('btn-login').onclick = function() {
            const pass = document.getElementById('access-pass').value;
            if(pass === MASTER_KEY) {
                // Desbloqueo inmediato
                document.getElementById('security-gate').style.display = 'none';
                document.getElementById('led-motor').classList.add('led-on');
                document.getElementById('status-text').innerText = 'ONLINE';
                document.getElementById('status-text').style.color = '#4ec9b0';
                
                // Cargar datos
                loadMessages();
            } else {
                alert("Clave incorrecta.");
            }
        };

        function sendData() {
            const val = document.getElementById('cmd-input').value;
            if(val) {
                db.ref('mensajes').push({
                    usuario: "JoniClapton",
                    contenido: val,
                    timestamp: Date.now()
                });
                document.getElementById('cmd-input').value = "";
            }
        }

        function loadMessages() {
            db.ref('mensajes').on('child_added', (snap) => {
                const data = snap.val();
                const div = document.createElement('div');
                div.style.marginBottom = "8px";
                div.innerHTML = `<span style="color: #569cd6;">[${new Date(data.timestamp).toLocaleTimeString()}]</span> <span style="color: #4ec9b0;">${data.usuario}:</span> ${data.contenido}`;
                document.getElementById('data-stream').appendChild(div);
                document.getElementById('data-stream').scrollTop = document.getElementById('data-stream').scrollHeight;
            });
        }
        // --- LÓGICA DE AUDITORÍA EXTERNA ---
let requestCounter = 0;

function registrarSolicitudExterna(tipo = "SYNC") {
    requestCounter++;
    const counterElement = document.getElementById('ext-requests-count');
    if(counterElement) {
        counterElement.innerText = requestCounter;
        // Animación de pulso para el contador
        counterElement.style.textShadow = "0 0 10px #dcdcaa";
        setTimeout(() => counterElement.style.textShadow = "none", 500);
    }
    
    // Opcional: Registrar en Firebase para tu historial de paper académico
    db.ref('sistema/auditoria_ia').push({
        tipo_solicitud: tipo,
        timestamp: Date.now(),
        protocolo: "SLER-B_BINDING"
    });
}

// Llamamos a la función cada vez que se carga un mensaje (simulando tráfico de IA)
db.ref('mensajes').on('child_added', () => {
    registrarSolicitudExterna("DATA_FETCH");
});
    </script>
</body>
</html>

